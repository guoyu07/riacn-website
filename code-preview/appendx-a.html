<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>附录 A 相关源代码 &mdash; Redis 实战</title>
    
    <link rel="stylesheet" href="../_static/pyramid.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Redis 实战" href="../index.html" />
    <link rel="prev" title="第 11 章相关源代码" href="chapter11.html" /> 

<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->


  </head>
  <body>


    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="chapter11.html" title="第 11 章相关源代码"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Redis 实战</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="a">
<h1>附录 A 相关源代码<a class="headerlink" href="#a" title="Permalink to this headline">¶</a></h1>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&#39;&#39;&#39;</span>
<span class="sd"># &lt;start id=&quot;linux-redis-install&quot;/&gt;</span>
<span class="sd">~:$ wget -q http://redis.googlecode.com/files/redis-2.6.2.tar.gz    # 从http://redis.io/download下载最新版的Redis。本书写作时Redis的最新版为2.6版本。</span>
<span class="sd">~:$ tar -xzf redis-2.6.2.tar.gz                                     # 解压源码。</span>
<span class="sd">~:$ cd redis-2.6.2/</span>
<span class="sd">~/redis-2.6.2:$ make                                                # 编译Redis。</span>
<span class="sd">cd src &amp;&amp; make all                                                  # 注意观察编译消息，</span>
<span class="sd">[trimmed]                                                           # 这里不应该看到错误。</span>
<span class="sd">make[1]: Leaving directory `~/redis-2.6.2/src&#39;                      #</span>
<span class="sd">~/redis-2.6.2:$ sudo make install                                   # 安装Redis。</span>
<span class="sd">cd src &amp;&amp; make install                                              # 注意观察安装消息，</span>
<span class="sd">[trimmed]                                                           # 这里不应该看到错误。</span>
<span class="sd">make[1]: Leaving directory `~/redis-2.6.2/src&#39;                      #</span>
<span class="sd">~/redis-2.6.2:$ redis-server redis.conf                             # 启动Redis服务器。</span>
<span class="sd">[13792] 26 Aug 17:53:16.523 * Max number of open files set to 10032 # 通过日志确认Redis已经顺利启动。</span>
<span class="sd">[trimmed]                                                           #</span>
<span class="sd">[13792] 26 Aug 17:53:16.529 * The server is now ready to accept     #</span>
<span class="sd">connections on port 6379                                            #</span>
<span class="sd"># &lt;end id=&quot;linux-redis-install&quot;/&gt;</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd"># &lt;start id=&quot;linux-python-install&quot;/&gt;</span>
<span class="sd">~:$ wget -q http://peak.telecommunity.com/dist/ez_setup.py          # 下载ez_setup模块</span>
<span class="sd">~:$ sudo python ez_setup.py                                         # 通过运行ez_setup模块来下载并安装 setuptools。</span>
<span class="sd">Downloading http://pypi.python.org/packages/2.7/s/setuptools/...    #</span>
<span class="sd">[trimmed]                                                           #</span>
<span class="sd">Finished processing dependencies for setuptools==0.6c11             #</span>
<span class="sd">~:$ sudo python -m easy_install redis hiredis                       # 通过运行setuptools的easy_install包来安装redis包以及hiredis包。</span>
<span class="sd">Searching for redis                                                 # redis包为Python提供了一个连接至Redis的接口。</span>
<span class="sd">[trimmed]                                                           #</span>
<span class="sd">Finished processing dependencies for redis                          #</span>
<span class="sd">Searching for hiredis                                               # hiredis包是一个C库，它可以提高Python的Redis客户端的速度。</span>
<span class="sd">[trimmed]                                                           #</span>
<span class="sd">Finished processing dependencies for hiredis                        #</span>
<span class="sd">~:$</span>
<span class="sd"># &lt;end id=&quot;linux-python-install&quot;/&gt;</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd"># &lt;start id=&quot;mac-redis-install&quot;/&gt;</span>
<span class="sd">~:$ curl -O http://rudix.googlecode.com/hg/Ports/rudix/rudix.py     # 下载用于安装Rudix的引导脚本。</span>
<span class="sd">[trimmed]</span>
<span class="sd">~:$ sudo python rudix.py install rudix                              # 命令Rudix安装自身。</span>
<span class="sd">Downloading rudix.googlecode.com/files/rudix-12.6-0.pkg             # Rudix下载并安装它自身。</span>
<span class="sd">[trimmed]                                                           #</span>
<span class="sd">installer: The install was successful.                              #</span>
<span class="sd">All done                                                            #</span>
<span class="sd">~:$ sudo rudix install redis                                        # 命令Rudix安装Redis。</span>
<span class="sd">Downloading rudix.googlecode.com/files/redis-2.4.15-0.pkg           # Rudix下载并安装它自身。</span>
<span class="sd">[trimmed]                                                           #</span>
<span class="sd">installer: The install was successful.                              #</span>
<span class="sd">All done                                                            #</span>
<span class="sd">~:$ redis-server                                                    # 启动Redis服务器。</span>
<span class="sd">[699] 13 Jul 21:18:09 # Warning: no config file specified, using the# Redis使用默认配置启动并运行。</span>
<span class="sd">default config. In order to specify a config file use &#39;redis-server #</span>
<span class="sd">/path/to/redis.conf&#39;                                                #</span>
<span class="sd">[699] 13 Jul 21:18:09 * Server started, Redis version 2.4.15        #</span>
<span class="sd">[699] 13 Jul 21:18:09 * The server is now ready to accept connections#</span>
<span class="sd">on port 6379                                                        #</span>
<span class="sd">[699] 13 Jul 21:18:09 - 0 clients connected (0 slaves), 922304 bytes#</span>
<span class="sd">in use                                                              #</span>
<span class="sd"># &lt;end id=&quot;mac-redis-install&quot;/&gt;</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd"># &lt;start id=&quot;mac-python-install&quot;/&gt;</span>
<span class="sd">~:$ sudo rudix install pip                              # 通过Rudix安装名为pip的Python包管理器。</span>
<span class="sd">Downloading rudix.googlecode.com/files/pip-1.1-1.pkg    # Rudix正在安装pip。</span>
<span class="sd">[trimmed]                                               #</span>
<span class="sd">installer: The install was successful.                  #</span>
<span class="sd">All done                                                #</span>
<span class="sd">~:$ sudo pip install redis                              # 现在可以使用pip来为Python安装Redis客户端库了。</span>
<span class="sd">Downloading/unpacking redis                             # Pip正在为Python安装Redis客户端库。</span>
<span class="sd">[trimmed]                                               #</span>
<span class="sd">Cleaning up...                                          #</span>
<span class="sd">~:$</span>
<span class="sd"># &lt;end id=&quot;mac-python-install&quot;/&gt;</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="sd">&#39;&#39;&#39;</span>
<span class="sd"># &lt;start id=&quot;windows-python-install&quot;/&gt;</span>
<span class="sd">C:\Users\josiah&gt;c:\python27\python                                      # 以交互模式启动Python。</span>
<span class="sd">Python 2.7.3 (default, Apr 10 2012, 23:31:26) [MSC v.1500 32 bit...</span>
<span class="sd">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="sd">&gt;&gt;&gt; from urllib import urlopen                                          # 从urllib模块里面载入urlopen工厂函数。</span>
<span class="sd">&gt;&gt;&gt; data = urlopen(&#39;http://peak.telecommunity.com/dist/ez_setup.py&#39;)    # 获取一个能够帮助你安装其他包的模块。</span>
<span class="sd">&gt;&gt;&gt; open(&#39;ez_setup.py&#39;, &#39;wb&#39;).write(data.read())                        # 将下载后的模块写入磁盘文件里。</span>
<span class="sd">&gt;&gt;&gt; exit()                                                              # 通过执行内置的exit()函数来退出Python解释器。</span>

<span class="sd">C:\Users\josiah&gt;c:\python27\python ez_setup.py                          # 运行ez_setup辅助模块。</span>
<span class="sd">Downloading http://pypi.python.org/packages/2.7/s/setuptools/...        # ez_setup辅助模块会下载并安装setuptools，</span>
<span class="sd">[trimmed]                                                               # 而setuptools可以方便地下载并安装Redis客户端库。</span>
<span class="sd">Finished processing dependencies for setuptools==0.6c11                 #</span>

<span class="sd">C:\Users\josiah&gt;c:\python27\python -m easy_install redis                # 使用setuptools的easy_install模块来下载并安装Redis。</span>
<span class="sd">Searching for redis                                                     #</span>
<span class="sd">[trimmed]                                                               #</span>
<span class="sd">Finished processing dependencies for redis                              #</span>
<span class="sd">C:\Users\josiah&gt;</span>
<span class="sd"># &lt;end id=&quot;windows-python-install&quot;/&gt;</span>
<span class="sd">&#39;&#39;&#39;</span>


<span class="sd">&#39;&#39;&#39;</span>
<span class="sd"># &lt;start id=&quot;hello-redis-appendix&quot;/&gt;</span>
<span class="sd">~:$ python                                          # 启动Python，并使用它来验证Redis的各项功能是否正常。</span>
<span class="sd">Python 2.6.5 (r265:79063, Apr 16 2010, 13:09:56) </span>
<span class="sd">[GCC 4.4.3] on linux2</span>
<span class="sd">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</span>
<span class="sd">&gt;&gt;&gt; import redis                                    # 导入Redis客户端库，如果系统已经安装了hiredis这个C加速库的话，那么Redis客户端库会自动使用hiredis。</span>
<span class="sd">&gt;&gt;&gt; conn = redis.Redis()                            # 创建一个指向Redis的连接。</span>
<span class="sd">&gt;&gt;&gt; conn.set(&#39;hello&#39;, &#39;world&#39;)                      # 设置一个值，</span>
<span class="sd">True                                                # 并通过返回值确认设置操作是否执行成功。</span>
<span class="sd">&gt;&gt;&gt; conn.get(&#39;hello&#39;)                               # 获取刚刚设置的值。</span>
<span class="sd">&#39;world&#39;                                             #</span>
<span class="sd"># &lt;end id=&quot;hello-redis-appendix&quot;/&gt;</span>
<span class="sd">&#39;&#39;&#39;</span>
</pre></div>
</div>
</div>



            <div class="section" id="discuss">
    <h2>
        讨论
        <a class="headerlink" href="#discuss" title="永久链接至标题">¶</a>
    </h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'redisinaction'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="chapter11.html" title="第 11 章相关源代码"
             >previous</a> |</li>
        <li><a href="../index.html">Redis 实战</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, 黄健宏（huangz）.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.3.1.
    </div>
  </body>
</html>